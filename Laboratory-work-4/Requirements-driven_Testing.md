# Тестування на основі вимог

Метою практики тестування на основі вимог (RT) є забезпечення того, щоб впроваджені засоби управління безпекою працювали належним чином і задовольняли заявленим вимогам безпеки проєкту. Він робить це шляхом поступового створення набору тестів безпеки та регресійних випадків і їх регулярного виконання.

Ключовим аспектом цієї практики є її увага як до позитивного, так і до негативного тестування. Перше перевіряє, чи задовольняють елементи управління безпекою додатка заявленим вимогам безпеки, і перевіряє їхнє правильне функціонування. Ці вимоги, як правило, мають функціональний характер. Негативне тестування стосується якості реалізації засобів управління безпекою і спрямоване на виявлення несподіваних недоліків проєктування і помилок реалізації шляхом тестування неправильного використання і зловживань. У більш просунутих формах ця практика сприяє стрес-тестуванню безпеки, такому як відмова в обслуговуванні, і прагне постійно покращувати безпеку застосунків шляхом послідовної автоматизації модульних тестів безпеки та створення регресійних тестів безпеки для всіх виявлених і виправлених помилок.

Хоча як методи тестування, заснованого на вимогах, так і тестування безпеки пов'язані з тестуванням безпеки, перше фокусується на перевірці правильної реалізації вимог безпеки, тоді як друге спрямоване на виявлення технічних недоліків реалізації в застосунку, незалежно від вимог.

## Огляд потоків

### Потік A - Перевірка управління

Перевірка елементів управління перевіряє відповідність елементів управління безпекою та вимог за допомогою тестування, що випливає з вимог, і запобігає впровадженню помилки в пізніших випусках за допомогою регресійного тестування.

### Потік B - Тестування на неправильне використання / зловживання 

Тестування на неправильне використання/зловживання використовує нечіткість, випадки неправильного використання/зловживання та ідентифікацію будь-яких функціональних можливостей або ресурсів у програмному забезпеченні, що можуть бути зловживаються, для того, щоб виявити слабкі місця у функціях для атаки на додаток.

## Огляд заходів
| Рівень зрілості |          | Потік А | Потік B |  
|:-----------|:---------:|:---------:|:---------:|
| 1 | Опортуністично знайти основні вразливості та інші проблеми безпеки. | Тестування програмних засобів управління безпекою.  | Виконайте тестування нечіткості безпеки. |  
| 2 | Виконайте перевірку реалізації, щоб виявити ризики, пов'язані з конкретними додатками, відповідно до вимог безпеки. | Отримання тестових випадків із відомих вимог безпеки. | Створюйте і тестуйте випадки зловживань і тест на дефекти бізнес-логіки. |  
| 3 | Підтримуйте рівень безпеки додатка після виправлення помилок, змін або під час обслуговування. | Виконайте регресійне тестування (з модульними тестами безпеки). | Відмова в обслуговуванні та стрес-тестування безпеки. |  

	
# Потік A - Перевірка управління

## РІВЕНЬ ЗРІЛОСТІ 1

### Вигода

Перевірена ефективність стандартних засобів управління безпекою

### Активність

Проведіть тести безпеки, щоб переконатися, що стандартні програмні засоби управління безпекою працюють належним чином. На високому рівні це означає перевірку правильного функціонування засобів управління конфіденційністю, цілісністю та доступністю даних, а також сервісу. Тести безпеки, принаймні, включають тестування перевірки автентичності, контролю доступу, перевірки введення, кодування та екранування даних і елементів управління шифруванням. Метою тесту є перевірка правильності реалізації елементів управління безпекою.

Тестування безпеки перевіряє відповідні елементи керування безпекою програмного забезпечення. Виконуйте контрольні тести безпеки вручну або за допомогою інструментів, щоразу, коли додаток змінює використання елементів керування. Такі методи, як перемикачі функцій і A/B-тестування, можуть використовуватися для поступового надання функцій ширшій аудиторії в міру їхньої достатньої перевірки. Перевірка управління програмним забезпеченням є обов'язковою для всього програмного забезпечення, яке є частиною програми SAMM.

### Питання

Чи тестуєте ви додатки на коректне функціонування стандартних засобів управління безпекою?

### Критерії якості 

* Тестування безпеки, принаймні, перевіряє реалізацію перевірки автентичності, контролю доступу, перевірки введення, кодування та екранування даних, а також елементів управління шифруванням
* Тестування безпеки виконується щоразу, коли додаток змінює використання елементів управління

### Відповіді
* Ні
* Так, деякі з них
* Так, принаймні половина з них
* Так, більшість або всі з них

  
## РІВЕНЬ ЗРІЛОСТІ 2

### Вигода

### Активність

Виходячи з вимог безпеки, визначте та реалізуйте набір тестових випадків безпеки, щоб перевірити програмне забезпечення на правильність функціональності. Щоб мати успішну програму тестування, ви повинні знати цілі тестування, визначені вимогами безпеки.

Отримання тестових випадків безпеки для додатків у сфері застосування з вимог безпеки, створених у межах практики безпеки SAMM "Вимоги безпеки". Щоб перевірити вимоги безпеки за допомогою тестів безпеки, вимоги безпеки управляються функціями і виділяють очікувану функціональність (що) і, неявно, реалізацію (як). Ці вимоги також називаються "позитивними вимогами", оскільки в них зазначається очікувана функціональність, яка може бути перевірена за допомогою тестів безпеки. Приклади позитивних вимог включають "застосунок заблокує користувача після шести невдалих спроб входу" або "паролі мають містити щонайменше шість буквено-цифрових символів". Перевірка позитивних вимог полягає в затвердженні очікуваної функціональності. Ви можете зробити це, повторно створивши умови тестування і запустивши тест відповідно до зумовлених вхідних даних. Відображення результатів як умови збою або проходження.

Часто найефективніше використовувати час проектної групи для створення тестових випадків для конкретних додатків, а загальнодоступні ресурси або придбані бази знань - для вибору застосовних загальних тестових випадків для забезпечення безпеки. Відповідні співробітники з розробки, безпеки та забезпечення якості перевіряють тестові випадки кандидатів на застосовність, ефективність і здійсненність. Отримання тестових випадків на етапі вимог та/або проектування функціональності. Тестування вимог безпеки є частиною функціонального тестування програмного забезпечення.

### Питання

Чи послідовно ви пишете і виконуєте тестові сценарії для перевірки функціональності вимог безпеки?

### Критерії якості
* Ви налаштовуєте тести для кожного додатка і затверджуєте очікувані функціональні можливості безпеки
* Результати тесту записуються як умова проходження або збою
* Тести використовують стандартизовану інфраструктуру або DSL

### Відповіді
* Ні
* Так, деякі з них
* Так, принаймні половина з них
* Так, більшість або всі з них

  
## РІВЕНЬ ЗРІЛОСТІ 3

### Вигода

Своєчасне та надійне виявлення порушень вимог безпеки
### Активність

Напишіть і автоматизуйте регресійні тести для всіх виявлених (і виправлених) помилок, щоб гарантувати, що вони стануть тестовою програмою, яка запобігатиме появі подібних проблем у пізніших випусках. Модульні тести безпеки повинні динамічно перевіряти (тобто під час виконання), що компоненти функціонують належним чином, і повинні перевіряти правильність реалізації змін коду.

Доброю практикою для розробників є створення тестових випадків безпеки у вигляді універсального набору тестів безпеки, який є частиною наявної платформи модульного тестування. Загальний набір тестів безпеки може містити тестові випадки безпеки для перевірки як позитивних, так і негативних вимог до елементів керування безпекою, як-от ідентифікація, автентифікація та контроль доступу, перевірка вводу та кодування, керування користувачами й сеансами, опрацювання помилок і винятків, шифрування, аудит і ведення журналу. Перевірте правильність виконання тестів безпеки якомога раніше. Якщо це можливо, наприклад, розгляньте можливість проходження тестів безпеки як частину вимог до злиття, перш ніж дозволяти введення нового коду в основну кодову базу. Крім того, розгляньте їх проходження як вимогу для перевірки складання.

Для функціональних тестів безпеки використовуйте модульні тести для функціональності елементів управління безпекою на рівні компонентів програмного забезпечення, таких як функції, методи або класи. Наприклад, тестовий випадок може перевіряти валідацію вводу і виводу (наприклад, санітарну обробку змінних) і перевірку меж змінних шляхом затвердження очікуваної функціональності компонента.

### Питання

Ви автоматично тестуєте додатки на регресію безпеки?

### Критерії якості
* Ви постійно пишете тести для всіх виявлених помилок (які, можливо, перевищують попередньо визначений поріг серйозності)
* Збір тестів безпеки в наборі тестів, який є частиною наявної платформи модульного тестування

### Відповіді
* Ні
* Так, для деяких додатків
* Так, принаймні для половини додатків
* Так, для більшості або всіх додатків

 
# Тестування зловживань/зловживань

## РІВЕНЬ ЗРІЛОСТІ 1

### Вигода

Аналіз поведінки ваших додатків під час роботи з несподіваним введенням даних
#### Активність

Виконуйте фаззінг, відправляючи випадкові або спотворені дані випробовуваному в спробі викликати його збій. Fuzz testing або Fuzzing - це метод тестування програмного забезпечення Black Box, який полягає в пошуку помилок реалізації з використанням автоматизованого спотвореного або напівдеформованого впровадження даних. Охопіть хоча б мінімальне розмиття вразливостей на тлі основних вхідних параметрів застосунку.
Перевагою нечіткого тестування є простота конструкції тесту та відсутність упереджень щодо поведінки системи. Стохастичний підхід призводить до помилок, які людські очі або структуроване тестування часто пропускають. Це також один із небагатьох способів оцінювання якості закритої системи (наприклад, SIP-телефону). Простота фузментування цілі компенсується складністю точного виявлення і сортування зіткнень. Віддавайте перевагу наявним інструментам і платформам нечіткого аналізу, щоб використовувати їхні допоміжні інструменти.

### Запитання

Чи тестуєте ви додатки з використанням методів рандомізації або фаззингу?

### Критерії якості
* Тестування охоплює більшість або всі основні вхідні параметри застосунку
* Ви записуєте і перевіряєте всі збої додатків на предмет впливу на безпеку з максимальними зусиллями

### Відповіді
* Ні
* Так, для деяких додатків
* Так, принаймні для половини додатків
* Так, для більшості або всіх додатків

## РІВЕНЬ ЗРІЛОСТІ 2

### Вигода

Виявлення недоліків бізнес-логіки додатків
### Активність

Випадки неправомірного та неправомірного використання описують ненавмисні та зловмисні сценарії використання застосунку, описуючи, як зловмисник може це зробити. Створюйте випадки неправильного використання і зловживань, щоб неправильно використати або використати слабкі місця елементів управління у функціях програмного забезпечення для атаки на додаток. Використовуйте моделі випадків зловживань для застосунку, щоб слугувати паливом для ідентифікації конкретних тестів безпеки, які прямо чи опосередковано використовують сценарії зловживань.

Зловживання функціональністю, іноді зване "атакою бізнес-логіки", залежить від проєктування та реалізації функцій і можливостей програми. Як приклад можна навести використання процесу скидання пароля для перерахування облікових записів. У межах тестування бізнес-логіки визначте важливі для застосунку бізнес-правила і перетворіть їх на експерименти, щоб перевірити, чи правильно застосунок застосовує бізнес-правило. Наприклад, у застосунку для торгівлі акціями чи дозволено зловмиснику почати торгівлю на початку дня і зафіксувати ціну, тримати угоду відкритою до кінця дня, а потім завершити продаж, якщо ціна акцій зросла, або скасувати, якщо ціна впала?
### Питання

Чи створюєте ви випадки зловживань на основі функціональних вимог і чи використовуєте їх для проведення тестів безпеки?

### Критерії якості
* Важливий бізнес-функціонал має відповідні випадки зловживань
* Ви будуєте історії про насильство навколо відповідних персонажів із чітко визначеними мотиваціями та характеристиками
* Ви фіксуєте виявлені слабкі місця як вимоги безпеки

### Відповіді
* Ні
* Так, іноді
* Так, більшу частину або весь час

## РІВЕНЬ ЗРІЛОСТІ 3

### Вигода

Прозорість стійкості до атак типу "відмова в обслуговуванні"
### Активність

Додатки особливо схильні до атак типу "відмова в обслуговуванні". Виконуйте навантажувальне тестування на відмову в обслуговуванні та безпеку проти них у контрольованих умовах, переважно в середовищах приймання додатків.

Інструменти навантажувального тестування генерують синтетичний трафік, даючи змогу тестувати продуктивність застосунку за великого навантаження. Одним із важливих тестів є те, скільки запитів на секунду застосунок може обробляти, залишаючись у межах своїх вимог до продуктивності. Тестування з однієї IP-адреси, як і раніше, корисне, оскільки воно дає уявлення про те, скільки запитів зловмисник повинен генерувати, щоб вплинути на застосунок.

Атаки типу "відмова в обслуговуванні" зазвичай призводять до нестачі або вичерпання ресурсів додатків. Щоб визначити, чи можна використовувати будь-які ресурси для створення типу "відмова в обслуговуванні", проаналізуйте кожен ресурс застосунку, щоб побачити, як його можна вичерпати. Пріоритизацію дій, які не пройшли перевірку автентичності, користувач може зробити. Доповніть загальні тести відмови в обслуговуванні стрес-тестами безпеки для виконання дій або створення умов, що викликають затримки, збої або збої додатка, що тестується.

### Питання
Чи виконуєте ви стрес-тестування на відмову в обслуговуванні та безпеку?

#### Критерії якості
* Стрес-тести націлені на конкретні ресурси застосунку (наприклад, виснаження пам'яті при збереженні великих обсягів даних у сеансі користувача)
* Ви розробляєте тести для відповідних персонажів із чітко визначеними можливостями (знання, ресурси)
* Результати повертаються в методи проектування 

### Відповіді
* Ні
* Так, іноді
* Так, принаймні в половині випадків
* Так, більшу частину або весь час




